<!DOCTYPE html>
<html>

<head><meta name="generator" content="Hexo 3.8.0">
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="theme-color" content="#33474d">
	<title>Von Weber&#39;s Blog</title>
	<link rel="stylesheet" href="/css/style.css">
	
      <link rel="alternate" href="/atom.xml" title="Von Weber&#39;s Blog" type="application/atom+xml">
	
	
	<script type="text/x-mathjax-config">
		MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
	</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML" async></script>

</head>

<body>

	<header class="header">
		<nav class="header__nav">
			
				<a href="/archives" class="header__link">Archive</a>
			
				<a href="/tags" class="header__link">Tags</a>
			
				<a href="/atom.xml" class="header__link">RSS</a>
			
		</nav>
		<h1 class="header__title"><a href="/">Von Weber&#39;s Blog</a></h1>
		<h2 class="header__subtitle">No models are correct, but some are more elegant than others.</h2>
	</header>

	<main>
		



	<article>
	
		<h1><a href="/2018/11/05/ARS-Adaptive-Rejection-Sampling/">ARS (Adaptive Rejection Sampling)</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2018-11-05</span><br>
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/C/">C</a> <a class="article__tag-link" href="/tags/ç»Ÿè®¡/">ç»Ÿè®¡</a> <a class="article__tag-link" href="/tags/ç»Ÿè®¡è®¡ç®—/">ç»Ÿè®¡è®¡ç®—</a> <a class="article__tag-link" href="/tags/éšæœºæ•°äº§ç”Ÿ/">éšæœºæ•°äº§ç”Ÿ</a>
			</span>
		
	</div>

	

	
		<p>ARS (Adaptive Rejection Sampling) æ˜¯ä¸€ç§ç”Ÿæˆå…·æœ‰å¯¹æ•°å‡¹å¯†åº¦ (log-concave density)çš„éšæœºæ•°çš„æ–¹æ³•ï¼ŒARSä½¿ç”¨åŒ…å›´çš„æ¥å—æ‹’ç» (Envelope Accept-Reject) æ–¹æ³•ï¼Œè€ŒEnvelopeæ¥å—æ‹’ç»æ–¹æ³•æ˜¯ä¸€èˆ¬æ¥å—æ‹’ç»æ–¹æ³•çš„ä¸€ä¸ªå˜å½¢ï¼ˆæ”¹è¿›ï¼‰ã€‚</p>
<h2 id="Envelope-Accept-Reject"><a href="#Envelope-Accept-Reject" class="headerlink" title="Envelope Accept-Reject"></a>Envelope Accept-Reject</h2><p>å’Œæ™®é€šçš„æ¥å—æ‹’ç»æ–¹æ³•ç›¸æ¯”ï¼ŒEARå¤šäº†ä¸€ä¸ªä¸‹ç•Œï¼Œå³ï¼Œè‹¥å­˜åœ¨å¯†åº¦$g_m$ï¼Œå‡½æ•°$g_l$å’Œæ­£å¸¸æ•°$M$æ»¡è¶³<br>$$g_l(x) \leq f(x) \leq Mg_m(x),$$<br>åˆ™ä¸‹åˆ—ç®—æ³•äº§ç”Ÿéšæœºå˜é‡æœä»åˆ†å¸ƒ$f$</p>
<ol>
<li>ç”Ÿæˆ $X \sim g_m(x), U \sim \mathcal{U}_{[0,1]}$</li>
<li>IF  $U \leq g_l(X)/Mg_m(X)$</li>
<li>THEN æ¥å—$X$</li>
<li>ELSEIF  $U \leq f(X)/Mg_m(X)$</li>
<li>THEN æ¥å—$X$</li>
</ol>
<p>è¿™ä¸ªç®—æ³•çš„æˆç«‹æ˜¯æ˜¾ç„¶çš„ï¼Œè‹¥æœ‰$U \leq g_l(X)/Mg_m(X)$ï¼Œå¿…æœ‰$U \leq f(X)/Mg_m(X)$ï¼Œæ‰€ä»¥å’Œæ™®é€šçš„æ¥å—æ‹’ç»æ–¹æ³•ç›¸æ¯”ï¼ŒEARå¯èƒ½åœ¨ç¬¬3è¡Œå°±ç»“æŸï¼Œè€Œä¸ç”¨è®¡ç®—$f(x)$çš„å€¼ï¼Œè¿™ä¸ªä¼˜ç‚¹å½“$f(x)$å¾ˆéš¾è®¡ç®—æ—¶ä¾¿å¾ˆæœ‰ç”¨ã€‚</p>
<p>å½“ç„¶EARå¹¶ä¸èƒ½å®Œå…¨é¿å…è®¡ç®—$f(x)$çš„å€¼ï¼Œå…·ä½“æ¥è®²ï¼ŒèŠ‚çœçš„æ¯”ä¾‹ä¸º<br>$$\begin{align}<br>P(U \leq g_l(X)/Mg_m(x)) &amp;= E[P(U \leq g_l(X)/Mg_m(X) | X)] \\<br>                         &amp;= E[g_l(X)/Mg_m(X)] \\<br>                         &amp;= \frac{1}{M} \int{g_m(x)dx}<br>\end{align}$$</p>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œä¸Šè¿°çš„å‡½æ•°$g_l, f, g_m$ï¼Œéƒ½å¯ä»¥ä¹‹å¤šå·®ä¸€ä¸ªç³»æ•°ï¼Œä½†æ˜¯è¿™æ ·çš„è¯ï¼Œå¸¸æ•°$M$ä¸å†å…·æœ‰ä¸Šè¿°çš„å«ä¹‰ã€‚ä»¥æ­£æ€åˆ†å¸ƒ$N(0,1)$ä¸ºä¾‹ï¼Œç•¥å»å¸¸æ•°ï¼Œå– $f(x)=\exp (-x^2/2)$ã€‚ç”±æ³°å‹’å…¬å¼ï¼Œ<br>$$e^{-x^2/2} \geq 1-\frac{x^2}{2}$$<br>äºæ˜¯å¯å–<br>$$g_l(x) = \left (1-\frac{x^2}{2} \right ) \lor 0$$<br>å¦ä¸€æ–¹é¢è‹¥å–$g_m(x)$ä¸ºLaplace(1)åˆ†å¸ƒï¼Œå³$g_m(x)=\lambda /2 \exp (-\lambda x), \lambda=1$ï¼Œåˆ™å®¹æ˜“è®¡ç®—æ¥å—ç‡ä¸º76%ï¼Œå¼•å…¥Envelopeä¸‹ç•Œï¼Œå¯é¿å…58%çš„$f(x)$çš„è®¡ç®—ï¼Œå¯¹äºå¤æ‚çš„ç›®æ ‡å¯†åº¦ï¼Œè¿™ä¸ªèŠ‚çœè¿˜æ˜¯å¾ˆå¯è§‚ã€‚</p>
<h2 id="Adaptive-Rejection-Sampling"><a href="#Adaptive-Rejection-Sampling" class="headerlink" title="Adaptive Rejection Sampling"></a>Adaptive Rejection Sampling</h2><p>è‡ªé€‚åº”æ‹’ç»é‡‡æ ·(ARS)çš„æƒ³æ³•å¾ˆç®€å•ï¼ŒåŸºäºä¸Šè¿°EARçš„æ€è·¯ï¼Œå¯¹äºå…·æœ‰å¯¹æ•°å‡¹å¯†åº¦çš„éšæœºå˜é‡ï¼Œç”±å‡¹å‡½æ•°çš„å‡ ä½•æ€§è´¨ï¼Œå¾ˆå®¹æ˜“æ„é€ å‡ºè‡ªé€‚åº”çš„Envelopeä¸Šä¸‹ç•Œï¼Œå‡†ç¡®æ¥è®²æ˜¯æ„é€ åˆ†æ®µçº¿æ€§å‡½æ•°çš„ä¸Šä¸‹ç•Œã€‚</p>
<p><figure class="figure"><img src="/img/ARS.svg" alt="å›¾ 1. ARSç®—æ³•"><figcaption class="figure__caption">å›¾ 1. ARSç®—æ³•</figcaption></figure></p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè®¾ $h=\log f$ å‡¹ï¼Œ$S_n = \{x_i, i=0,1,â€¦,n+1\}$ æ˜¯ä¸€åˆ—ä»å°åˆ°å¤§çš„ $f$ æ”¯æ’‘ä¸Šçš„ç‚¹ã€‚ç”± $h$ çš„å‡¹æ€§ï¼Œç›´çº¿ $L_{i,i+1}$ ç©¿è¿‡ç‚¹ $(x_i,h(x_i))$ å’Œç‚¹ $(x_{i+1},h(x_{i+1}))$ï¼Œåœ¨åŒºé—´ $[x_i,x_{i+1}]$ ä¸Šåœ¨ $h$ çš„ä¸‹æ–¹ï¼Œåœ¨è¿™ä¸ªåŒºé—´å¤–åœ¨ $h$ çš„ä¸Šæ–¹ï¼Œäºæ˜¯æˆ‘ä»¬å®šä¹‰<br>$$ \overline{h}_n (x) = \min \{ L_{i-1,i}(x), L_{i+1,i+2}(x) \}$$</p>
<p>å¦‚ä¸Šå›¾çº¢çº¿ï¼Œå®šä¹‰<br>$$\underline{h}_n(x) = L_{i,i+1}(x)$$</p>
<p>å¦‚ä¸Šå›¾è“çº¿æ‰€ç¤ºã€‚åœ¨é›†åˆ $[ x_0,x_{n+1} ]^c$ ä¸Šè¡¥å……<br>$$\underline{h}_n(x) = - \infty, \quad \overline{h}_n (x) = \min \{ L_{0,1}(x), L_{n,n+1}(x)$$<br>è¿™æ ·ï¼Œåœ¨ $f$ çš„æ”¯æ’‘ä¸Šæˆç«‹<br>$$\underline{h}_n(x) \leq h(x) \leq \overline{h}_n (x)$$<br>æœ€åå–æŒ‡æ•°ï¼Œå³ $\underline{f}_n(x) = \exp \underline{h}_n(x)$ï¼Œ$\overline{f}_n(x) = \exp \overline{h}_n(x)$ï¼Œæœ‰<br>$$\underline{f}_n(x) \leq f(x) \leq \overline{f}_n (x)= \varpi g_n(x)$$<br>æœ€å³è¾¹çš„ç­‰å·è¡¨ç¤ºï¼Œå°† $\overline{f}_n(x)$ å½’ä¸€åŒ–ä¸ºå¯†åº¦å‡½æ•°ï¼Œ$\varpi$æ˜¯æ­£è§„åŒ–å¸¸æ•°ã€‚</p>
<p>è¿™æ ·æˆ‘ä»¬å¾—åˆ°äº†Envelopeçš„ä¸Šä¸‹ç•Œï¼Œå¸¦å…¥åˆ°EARç®—æ³•ä¸­ï¼Œæˆ‘ä»¬å¾—åˆ°å¦‚ä¸‹çš„ARSç®—æ³•</p>
<ol start="0">
<li>åˆå§‹åŒ– $n$ å’Œ $S_n$</li>
<li>ç”Ÿæˆ $X \sim g_n(x), U \sim \mathcal{U}_{[ 0,1 ]}$</li>
<li>IF $U \leq \underline{f}_n(X) / \varpi g_n(X)$</li>
<li>THEN æ¥å— $X$</li>
<li>ELSEIF $U \leq f(X) / \varpi g_n(X)$</li>
<li>THEN æ¥å— $X$</li>
<li>$\qquad$æ›´æ–° $S_n \to S_{n+1}=S_n \cup \{ X \}$</li>
</ol>
<p>ARSç®—æ³•åœ¨ç”Ÿæˆéšæœºæ•°è¿‡ç¨‹ä¸­ä¼šä¸æ–­æ›´æ–° $S_n$ï¼Œä½¿å¾—Envelopeä¸Šä¸‹ç•Œè¶Šæ¥è¶Šæ¥è¿‘ $f$ï¼Œç®—æ³•çš„æ•ˆç‡è¶Šæ¥è¶Šé«˜ï¼Œä½“ç°åœ¨æ¥å—ç‡è¶Šæ¥è¶Šæ¥è¿‘1,å’Œè®¡ç®— $f(x)$ çš„é¢‘ç‡è¶Šæ¥è¶Šå°‘ï¼ˆè¶‹è¿‘äº0ï¼‰ã€‚</p>
<p>å¦å¤–è¦æŒ‡å‡ºçš„æ˜¯ï¼Œç®—æ³•ä¸­çš„å¸¸æ•° $\varpi$ å¹¶ä¸ç”¨è®¡ç®—ï¼Œå› ä¸º $\varpi$ æ€»æ˜¯å’Œ $g_n(X)$ ä¸€èµ·ï¼Œè€Œ $\varpi g_n(X) = \overline{f}_n (x)$ã€‚</p>
<p>åˆ°æ­¤ä¸ºæ­¢ï¼ŒARSç®—æ³•åªå·®çš„æ­¥éª¤1çš„ç”Ÿæˆ $X \sim g_n(X)$ï¼Œå®ƒè¢«è§£å†³å¦‚ä¸‹</p>
<h2 id="Generate-X-sim-g-n-x"><a href="#Generate-X-sim-g-n-x" class="headerlink" title="Generate $X \sim g_n(x)$"></a>Generate $X \sim g_n(x)$</h2><p>$g_n(x)$ æ˜¯åˆ†æ®µå‡½æ•°ï¼Œæˆ‘ä»¬å°†å®ƒé‡æ–°å†™æˆ<br>$$g_n(x) = \varpi^{-1} \left \{ \sum_{i=0}^{r_n} e^{\alpha_i x + \beta_i} \Bbb{I}_{[ x_i,x_{i+1} ]}(x) +<br>e^{\alpha_{-1} x + \beta_{-1}} \Bbb{I}_{[- \infty,x_0]}(x) +<br>e^{\alpha_{r_n+1} x + \beta_{r_n+1}} \Bbb{I}_{[x_n+1,+ \infty]}(x) \right \}$$</p>
<p>å…¶ä¸­ $y=\alpha_i x + \beta_i$ å¯¹åº”åŒºé—´ $[ x_i,x_i+1 ]$ï¼Œè¿™å…¶ä¸­åŒ…æ‹¬ç›¸é‚»ä¸¤ä¸ªçº¿æ®µçš„äº¤ç‚¹ï¼Œç›´çº¿ $y=\alpha_i x + \beta_i$ å’Œ $y=\alpha_{i+1} x + \beta_{i+1}$ çš„äº¤ç‚¹åœ¨ $x=-(\beta_{i+1}-\beta_i)/(\alpha_{i+1}-\alpha_i)$ å¤„ã€‚$y=\alpha_{-1} x + \beta_{-1}$ å’Œ $y=\alpha_{r_n+1} x + \beta_{r_n+1}$ åˆ†åˆ«å¯¹åº”åŒºé—´ $[- \infty, x_0]$ å’Œ $ [ x_{n+1}, + \infty ]$ï¼Œ $r_n$ è¡¨ç¤ºçº¿æ®µçš„æ•°é‡</p>
<p>ç”± $\varpi g_n(X) = \overline{f}_n (x)$ï¼Œä¸¤è¾¹ç§¯åˆ†å¯å¾—<br>$$\begin{align} \varpi_n &amp;= \int_{- \infty}^{x_0} e^{\alpha_{-1} x + \beta_{-1}} dx +<br>\sum_{i=0}^{r_n} \int_{x_i}^{x_{i+1}} e^{\alpha_{i} x + \beta_{i+1}} dx +<br>\int_{x_{n+1}}^{+ \infty} e^{\alpha_{r_n+1} x + \beta_{r_n+1}} dx \\<br>&amp;= \frac{e^{\alpha_{-1} x_0 + \beta_{-1}}}{\alpha_{-1}} +<br>\sum_{i=0}^{r_n}  e^{\beta_i} \frac{\alpha_{i} x_{i+1} - \alpha_{i} x_{i}}{\alpha_{i}} -<br>\frac{\alpha_{r_n+1} x_{n+1}}{\alpha_{r_n+1}}<br>\end{align}$$</p>
<p>ç”±ä¸Šé¢çš„è®¡ç®—çŸ¥é“ï¼Œ$g_n(x)$ åœ¨åŒºé—´ $[ x_i,x_{i+1} ]$ ä¸Šçš„æ¦‚ç‡<br>$$\omega_i = \begin{cases}<br>\frac{e^{\alpha_{-1} x_0 + \beta_{-1}}}{ \varpi \alpha_{-1}} &amp;\text{if } i=-1, \\<br>e^{\beta_i} \frac{\alpha_{i} x_{i+1} - \alpha_{i} x_{i}}{\varpi \alpha_{i}} &amp;\text{if } 0 \leq i \leq r_n, \\<br>-\frac{\alpha_{r_n+1} x_{n+1}}{\varpi \alpha_{r_n+1}} &amp;\text{if } i = r_n+1.<br>\end{cases}$$</p>
<p>å…¶ä¸­ $ x_{-1}=- \infty, x_{r_n+2}=+ \infty$ã€‚åˆ©ç”¨é€†åˆ†å¸ƒåˆ†å¸ƒå‡½æ•°æ–¹æ³•ï¼Œæ³¨æ„åˆ°è‹¥ $ X \sim g_n(x)$ï¼Œåˆ™ $X|x_i \leq X \leq x_{i+1} \sim h(x)=c^{-1} \exp \{ \alpha_i x +\beta_i \} $ï¼Œå…¶ä¸­ $ c=\alpha^{-1} ( e^{\alpha_i x_{i+1} +\beta_i} -e^{\alpha_i x_{i} +\beta_i} )$ï¼Œæˆ‘ä»¬å¾—åˆ°å¦‚ä¸‹çš„ç®—æ³•ç”Ÿæˆéšæœºå˜é‡ $X \sim g_n(x)$</p>
<ol>
<li>ä¾æ¦‚ç‡ $\omega_i$ é€‰æ‹©åŒºé—´ $[ x_i,x_{i+1} ]$ </li>
<li>ç”Ÿæˆ $U \sim \mathcal{U}_{[ 0,1 ]}$ï¼Œå–<br>$$ X = \alpha^{-1} \log [ e^{\alpha_i x_i} + U (e^{\alpha_i x_{i+1}} - e^{\alpha_i x_i}) ]$$</li>
</ol>
<h2 id="ARSç®—æ³•çš„Cè¯­è¨€å®ç°"><a href="#ARSç®—æ³•çš„Cè¯­è¨€å®ç°" class="headerlink" title="ARSç®—æ³•çš„Cè¯­è¨€å®ç°"></a>ARSç®—æ³•çš„Cè¯­è¨€å®ç°</h2><p>åŸºäºä¸Šè¿°æè¿°ï¼Œæˆ‘ä»¬ç”¨Cè¯­è¨€å®ç°ARSç®—æ³•ï¼Œç”±äºç®—æ³•ä¸­æ¶‰åŠè®¸å¤šåŠ¨æ€åŠ¨æ€å†…å­˜çš„æ“ä½œï¼Œè€ƒè™‘åˆ°ç»“æ„åŒ–å’Œæ€§èƒ½çš„å¹³è¡¡ï¼Œæˆ‘ä»¬è®¾è®¡ç¨‹åºçš„ç»“æ„å¦‚ä¸‹ã€‚</p>
<p>é¦–å…ˆæ˜¯ä¿å­˜ä¸€ä¸ªçº¿æ®µçš„ç»“æ„ <code>Segment</code>ï¼ŒåŒ…å«çº¿æ®µçš„å§‹æœ«æ¨ªåæ ‡ï¼Œæ–œç‡ï¼Œæˆªè·å’Œå–å®ŒæŒ‡æ•°åçš„ç§¯åˆ†ã€‚<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> </span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">float</span> x1, x2;</span><br><span class="line">    <span class="keyword">float</span> alpha, beta;</span><br><span class="line">    <span class="keyword">float</span> area;</span><br><span class="line">&#125; Segment;</span><br></pre></td></tr></table></figure></p>
<p>ç»“æ„ä½“<code>Interval</code>ä¿å­˜äº†åŒºé—´ $[ x_i, x_{i+1} ]$ ä¸Šçš„envelopeä¸Šä¸‹ç•Œï¼ŒåŒ…å«ä¸‹ç•Œä¸€æ®µå’Œä¸Šç•Œï¼ˆè‡³å¤šï¼‰ä¸¤æ®µçº¿æ®µçš„ä¿¡æ¯ã€‚<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">double</span> x1, x2;</span><br><span class="line">    <span class="keyword">double</span> alpha, beta;</span><br><span class="line">    Position flag;</span><br><span class="line">    Segment leftseg, rightseg;</span><br><span class="line">&#125; Interval;</span><br></pre></td></tr></table></figure></p>
<p>æœ€åæˆ‘ä»¬ä½¿ç”¨äºŒå‰æœç´¢æ ‘æ¥ç»„ç»‡è¿™äº›<code>Interval</code>ï¼ŒèŠ‚ç‚¹çš„åºå…³ç³»ç”±åŒºé—´çš„å‰åå®šä¹‰ã€‚äºŒå‰æ ‘çš„å®ç°ä½¿å¾—å¯¹åˆ†æ®µå‡½æ•°çš„æŸ¥æ‰¾å’Œæ±‚å€¼è¾¾åˆ° $log(n)$ çš„æ—¶é—´å¤æ‚åº¦ã€‚</p>
<p>ç”Ÿæˆéšæœºæ•°çš„å‡½æ•°<code>rars()</code>æ¥å—ä¸€ä¸ªæŒ‡å‘æ±‚å¯†åº¦å‡½æ•°å¯¹æ•°çš„å‡½æ•°æŒ‡é’ˆ<code>(*log_density)(double)</code> ï¼Œä¸åŒçš„å‡½æ•°æŒ‡é’ˆå¯ä»¥åŒ…è£…æˆä¸åŒçš„éšæœºæ•°å‡½æ•°ã€‚</p>
<p>ä¸‹é¢çš„Gistæ˜¾å¼äº†éƒ¨åˆ†æ ¸å¿ƒä»£ç ï¼Œå®Œæ•´çš„æºä»£ç å‚è§ <a href="https://github.com/vonweber0616/ARS" target="_blank" rel="noopener">GitHubä»“åº“</a>ã€‚</p>
<p>æœ€åå€¼å¾—ä¸€æçš„æ˜¯ARSçš„ç®—æ³•æˆ‘è§‰å¾—å”¯ä¸€çš„ä¼˜ç‚¹å°±æ˜¯æ³›ç”¨æ€§ï¼Œå› ä¸ºè®¸å¤šæœ‰ç”¨çš„åˆ†å¸ƒéƒ½æ˜¯å¯¹æ•°å‡¹å¯†åº¦ã€‚ARSç®—æ³•çœ‹èµ·æ¥å¾ˆç†æƒ³ï¼Œä½†æ˜¯åœ¨å®ç°ä¸Šçš„ç¼ºç‚¹æ˜¯å®ƒåŒ…å«å¤§é‡åŠ¨æ€å†…å­˜æ“ä½œï¼Œè¿™äº›å†…å­˜æ“ä½œçš„å¼€é”€å·²ç»è¿œè¶…è¿‡è®¡ç®—æœ¬èº«ï¼Œæ­¤å¤–ç”±äºARSç®—æ³•æ„é€ åˆ†æ®µçš„envelopeä¸Šä¸‹ç•Œï¼Œéšç€é›†åˆ $S_n$ ä¸æ–­å¢å¤§ï¼Œå¯¹åˆ†æ®µå‡½æ•°è¿›è¡Œæ±‚å€¼å¾—å¼€é”€ä¹Ÿè¶Šæ¥è¶Šå¤§ã€‚æ‰€ä»¥æˆ‘è§‰å¾—ä¸å¦‚ä¸€å¼€å§‹å°±è®¾å®šä¸€ä¸ªå……åˆ†å¤§çš„é›†åˆ $S_n$ï¼Œæ¯”å¦‚åŒ…å«å‡ ç™¾ä¸ªåˆ†å‰²ç‚¹ï¼Œæ— éœ€å†ç”Ÿæˆéšæœºæ•°è¿‡ç¨‹ä¸­æ›´æ–° $S_n$ã€‚</p>
<script src="//gist.github.com/141a5cb0e9229491c07b3442ae5bd841.js?file=ARS.c"></script>

	

	

</article>




	<article>
	
		<h1><a href="/2018/11/03/SIMDæŒ‡ä»¤ä¼˜åŒ–/">An Optimization with SIMD Instructions</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2018-11-03</span><br>
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/AVX2/">AVX2</a> <a class="article__tag-link" href="/tags/C/">C</a> <a class="article__tag-link" href="/tags/SIMD/">SIMD</a> <a class="article__tag-link" href="/tags/æ±‡ç¼–/">æ±‡ç¼–</a>
			</span>
		
	</div>

	

	
		<p>æœ¬æ–‡ä»‹ç»åˆ©ç”¨SIMDæŒ‡ä»¤ï¼ˆAVX2ï¼‰ä¼˜åŒ–è¿ç®—çš„ä¸€ç‚¹æ¢ç´¢ï¼Œä»¥å•ç²¾åº¦floatç±»å‹çš„åŠ æ³•å’Œä¹˜æ³•ä¸ºä¾‹ã€‚</p>
<p>è®¡ç®—æ¨¡å‹ï¼š</p>
<ul>
<li>hardware: E5 2678 v3 2.5GHz; X99; DDR4 2133 MHz 16GB x1</li>
<li>software: win10 17134; mingw-W64(gcc) 8.1.0</li>
</ul>
<h2 id="SIMDå’ŒAVX2ç®€ä»‹"><a href="#SIMDå’ŒAVX2ç®€ä»‹" class="headerlink" title="SIMDå’ŒAVX2ç®€ä»‹"></a>SIMDå’ŒAVX2ç®€ä»‹</h2><p>SIMD (<strong>s</strong>ingle <strong>i</strong>nstrucion <strong>m</strong>ultiple <strong>d</strong>ata)å•æŒ‡ä»¤å¤šæ•°æ®æ˜¯ç”¨æ¥å¯¹å¤šä¸ªæ•°æ®æ‰§è¡Œå•ä¸ªæŒ‡ä»¤ï¼ˆç®—æœ¯æˆ–é€»è¾‘ï¼‰çš„å‘é‡åŒ–æ–¹æ³•ï¼Œæ˜¯X86-64(AMD64)æŒ‡ä»¤é›†çš„æ‹“å±•ã€‚ç”±æœ€æ—©çš„SSEï¼ˆSSEæœ‰å¤šä¸ªæ”¹è¿›ç‰ˆæœ¬ï¼Œæœ€åçš„SSEç‰ˆæœ¬æ˜¯SSE4.2ï¼‰ï¼Œåˆ°åæ¥çš„AVXï¼ŒAVX2ï¼Œæœ€æ–°çš„æ˜¯AVX512ï¼Œç”±äºAVX512åœ¨è¾ƒæ–°å’Œé«˜ç«¯çš„CPUæ‰æ”¯æŒï¼Œç›¸è¾ƒè€Œè¨€ï¼Œæ›´å¤šçš„CPUæ”¯æŒAVX2ã€‚</p>
<p>AVX2æŒ‡ä»¤é›†é…åˆ16ä¸ª256ä½ymmå¯„å­˜å™¨ï¼ˆä½128ä½ä¸ºxmmå¯„å­˜å™¨ï¼‰ï¼Œå¯ä»¥å­˜å‚¨8ä¸ª4å­—èŠ‚(float, int)æˆ–4ä¸ª8å­—èŠ‚(double, long)æ•°æ®ï¼Œå¹¶åœ¨ä¸€ä¸ªæŒ‡ä»¤å†…åŒæ—¶åš8ä¸ªæˆ–4ä¸ªè¿ç®—ã€‚</p>
<h2 id="Basic-Solution"><a href="#Basic-Solution" class="headerlink" title="Basic Solution"></a>Basic Solution</h2><p>ç°åœ¨æ¥è€ƒè™‘ä¸€ä¸ªä»»åŠ¡ï¼Œå°†é•¿åº¦å‡ä¸º<code>N = 100000</code>çš„floatæ•°ç»„<code>a, b, c</code>åšè¿ç®—<code>(a + b) * c</code>ï¼Œå­˜æ”¾åœ¨æ•°ç»„rä¸­ã€‚å°†è¿™ä¸ªæ“ä½œé‡å¤<code>NTIME = 50000</code>æ¬¡ï¼Œè®°å½•æ¶ˆè€—çš„æ—¶é—´ã€‚</p>
<p>ç”±äºè¿™ä¸ªä»»åŠ¡ä½œä¸ºç¼–ç¨‹é—®é¢˜æ˜¯å¦‚æ­¤çš„ç®€å•å’Œç›´æ¥ï¼Œæˆ‘ä»¬å¾ˆå¿«å†™å‡ºcç¨‹åºå¦‚<code>code 0: simd0.c</code>ï¼Œå¹¶è§‰å¾—æ¯«æ— ä¼˜åŒ–çš„ä½™åœ°ï¼Œå› ä¸ºä»…æœ‰ä¸‰è¡Œä»£ç æ²¡æœ‰ä»»ä½•å¤šä½™çš„æ“ä½œï¼Œåªæœ‰17,19,20ä¸‰è¡Œä»£ç æ˜¯åœ¨å®Œæˆä»»åŠ¡ã€‚å…¶ä¸­çš„å˜é‡<code>sum</code>ä»…ä»…æ˜¯ç”¨æ¥é˜²æ­¢ç¼–è¯‘å™¨çš„è‡ªåŠ¨ä¼˜åŒ–ä¼šç›´æ¥å»æ‰é‡å¤50000æ¬¡è¿™ä¸ªæ­¥éª¤ï¼Œè™½ç„¶è¿™ä¸ªä¼˜åŒ–å¾ˆå‰å®³ï¼Œä½†æ˜¯åç¦»äº†æˆ‘ä»¬çš„åŸæ„ã€‚</p>
<p>ä½¿ç”¨å‘½ä»¤<code>gcc simd0.c -o simd0.exe</code>ç¼–è¯‘ï¼Œè¿è¡Œæ—¶é—´ä¸º<code>13s 803ms 846Î¼s</code>ï¼Œå–5æ¬¡è®¡ç®—çš„ä¸­ä½æ•°ï¼Œä¸‹åŒã€‚å¦‚æœæˆ‘ä»¬æ»¡è¶³äºè¿™ä¸ªç»“æœï¼Œè§‰å¾—å·²ç»å¾ˆå¿«äº†ï¼Œé‚£ç”Ÿæ´»ä¹Ÿå°±æ²¡æœ‰äº†ä¹è¶£ã€‚</p>
<figure class="highlight c"><figcaption><span>code 0: simd0.c</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/time.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 100000</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NTIMES 50000</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> a[N], b[N], c[N], r[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i, times, sum;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">timeval</span> <span class="title">starttime</span>, <span class="title">endtime</span>;</span></span><br><span class="line">    <span class="keyword">long</span> s, ms, us, timeuse;</span><br><span class="line">    gettimeofday(&amp;starttime, <span class="number">0</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* workhorse code  */</span></span><br><span class="line">    <span class="keyword">for</span> (times = <span class="number">0</span>; times &lt; NTIMES; times++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; N; ++i)</span><br><span class="line">            r[i] = (a[i] + b[i]) * c[i];</span><br><span class="line">        sum += sum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* elapsed time  */</span></span><br><span class="line">    gettimeofday(&amp;endtime, <span class="number">0</span>);</span><br><span class="line">    timeuse = <span class="number">1000000</span> * (endtime.tv_sec - starttime.tv_sec) + </span><br><span class="line">            endtime.tv_usec - starttime.tv_usec;</span><br><span class="line">    s = timeuse / <span class="number">1000000</span>;</span><br><span class="line">    ms = timeuse / <span class="number">1000</span> % <span class="number">1000</span>;</span><br><span class="line">    us = timeuse % <span class="number">1000</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%ld s %ld ms %ld us\n"</span>, s, ms, us);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="GCCè‡ªåŠ¨ä¼˜åŒ–"><a href="#GCCè‡ªåŠ¨ä¼˜åŒ–" class="headerlink" title="GCCè‡ªåŠ¨ä¼˜åŒ–"></a>GCCè‡ªåŠ¨ä¼˜åŒ–</h2><p>æˆ‘ä»¬å¯ä»¥ç”¨å‘½ä»¤<code>gcc -S -o simd0.s simd0.c</code>ç”Ÿæˆä¸Šè¿°ç¨‹åº<code>simd0.exe</code>çš„æ±‡ç¼–ä»£ç ï¼Œçœ‹çœ‹å“ªé‡Œå¯ä»¥ä¼˜åŒ–ï¼Œå…¶å®è¿™ä¸ªæ±‡ç¼–çš„è ¢ä¸åœ¨äºæ²¡æœ‰ç”¨SIMDæŒ‡ä»¤ï¼Œä¸»è¦é—®é¢˜æ˜¯æœ‰å¤ªå¤šçš„è®¿é—®å†…å­˜æŒ‡ä»¤ï¼Œä»£ç æ²¡æœ‰è´´å‡ºæ¥ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨<code>-O1</code>å‚æ•°è¿›è¡Œä¼˜åŒ–ï¼Œå³<code>gcc -O1 -o simd0-O1.exe simd0.c</code>ï¼Œæ¶ˆè€—çš„æ—¶é—´ä¸‹é™ä¸º<code>3s 841ms 346Î¼s</code>ã€‚æ±‡ç¼–ä»£ç å¦‚<code>code 1: simd0-O1.s</code>, å…¶ä¸­ç•¥å»äº†è®¡æ—¶ï¼Œæ‰“å°å’ŒæŸäº›ä¼ªæŒ‡ä»¤ï¼Œä¸‹åŒã€‚<br><figure class="highlight x86asm"><figcaption><span>code 1: simd0-O1.s</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">main:</span></span><br><span class="line">  movl <span class="number">$50000</span>, %edx</span><br><span class="line">  <span class="keyword">jmp</span> .L2</span><br><span class="line"><span class="symbol">.L6:</span></span><br><span class="line">  <span class="keyword">addss</span> %xmm1, %xmm1</span><br><span class="line">  subl <span class="number">$1</span>, %edx</span><br><span class="line">  <span class="keyword">je</span> .L4</span><br><span class="line"><span class="symbol">.L2:</span></span><br><span class="line">  movl <span class="number">$0</span>, %eax</span><br><span class="line"><span class="symbol">.L3:</span></span><br><span class="line">  <span class="keyword">movss</span> a(%rax), %xmm0</span><br><span class="line">  <span class="keyword">addss</span> b(%rax), %xmm0</span><br><span class="line">  <span class="keyword">mulss</span> c(%rax), %xmm0</span><br><span class="line">  <span class="keyword">movss</span> %xmm0, r(%rax)</span><br><span class="line">  addq <span class="number">$4</span>, %rax</span><br><span class="line">  cmpq <span class="number">$400000</span>, %rax</span><br><span class="line">  <span class="keyword">jne</span> .L3</span><br><span class="line">  <span class="keyword">jmp</span> .L6</span><br><span class="line"><span class="symbol">.L4:</span></span><br><span class="line">  <span class="keyword">cvttss2si</span> %xmm1, %eax</span><br><span class="line">  <span class="keyword">ret</span></span><br></pre></td></tr></table></figure></p>
<p><code>simd0-O1.s</code>çš„ä»£ç å’Œä¸ä½¿ç”¨ä¼˜åŒ–çš„ä»£ç ç›¸æ¯”ï¼Œä¸»è¦æ”¹è¿›æ˜¯ä»å†…å­˜ä¸­å–ä¸€ä¸ªæ•°æ¯”å¦‚<code>a[i]</code>ï¼Œåªéœ€è¦ä¸€æ¬¡è®¿å­˜ï¼Œå› ä¸ºæŒ‡æ ‡<code>i</code>å­˜åœ¨å¯„å­˜å™¨<code>%rax</code>ä¸­ï¼Œè¿™ä¸€ä¸ªæ”¹è¿›å¤§å¹…é™ä½äº†è®¿é—®æŒ‡æ ‡<code>i</code>å’Œæ•°ç»„å…ƒç´ <code>a[i]</code>å’Œå…¶ä»–æ•°ç»„çš„æ—¶é—´ã€‚<code>simd0-O1.s</code>çš„ä»£ç éå¸¸ç¬¦åˆæˆ‘ä»¬æ€ç»´ï¼Œå®ƒä½¿ç”¨<code>movss</code>ä»å†…å­˜ä¸­å–ä¸€ä¸ªå•ç²¾åº¦æ•°ï¼Œä½¿ç”¨<code>addss</code>å’Œ<code>mulss</code>æ‰§è¡Œå•ç²¾åº¦æµ®ç‚¹æ•°çš„åŠ æ³•å’Œä¹˜æ³•ã€‚æ‰§è¡Œä¸€éè®¡ç®—åå†åšç¬¬äºŒéã€‚</p>
<p>ä½¿ç”¨<code>-O2</code>ä¼˜åŒ–å’Œ<code>-O1</code>å¯¹è¿™ä¸ªç¨‹åºæ²¡æœ‰å¤ªå¤§å·®å¼‚ï¼Œæˆ‘ä»¬ç•¥å»ã€‚</p>
<h2 id="SIMDçš„ç¬¬ä¸€å°è¯•"><a href="#SIMDçš„ç¬¬ä¸€å°è¯•" class="headerlink" title="SIMDçš„ç¬¬ä¸€å°è¯•"></a>SIMDçš„ç¬¬ä¸€å°è¯•</h2><p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨<code>-O3</code>çº§åˆ«ä¼˜åŒ–ï¼Œå°±ä¼šæ”¾å‘ç”ŸæŸäº›ä¸ä¸€æ ·çš„äº‹æƒ…ï¼Œæ±‡ç¼–ä»£ç è§<code>code 2: simd0-O3.s</code><br><figure class="highlight x86asm"><figcaption><span>code 2: simd0-O3.s</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">main:</span></span><br><span class="line">  movl <span class="number">$50000</span>, %edx</span><br><span class="line"><span class="symbol">.L2:</span></span><br><span class="line">  xorl %eax, %eax</span><br><span class="line"><span class="symbol">.L3:</span></span><br><span class="line">  <span class="keyword">movaps</span> b(%rax), %xmm0</span><br><span class="line">  <span class="keyword">addps</span> a(%rax), %xmm0</span><br><span class="line">  addq <span class="number">$16</span>, %rax</span><br><span class="line">  <span class="keyword">mulps</span> c-<span class="number">16</span>(%rax), %xmm0</span><br><span class="line">  <span class="keyword">movaps</span> %xmm0, r-<span class="number">16</span>(%rax)</span><br><span class="line">  cmpq <span class="number">$400000</span>, %rax</span><br><span class="line">  <span class="keyword">jne</span> .L3</span><br><span class="line">  <span class="keyword">addss</span> %xmm1, %xmm1</span><br><span class="line">  subl <span class="number">$1</span>, %edx</span><br><span class="line">  <span class="keyword">jne</span> .L2</span><br><span class="line">  <span class="keyword">cvttss2si</span> %xmm1, %eax</span><br><span class="line">  <span class="keyword">ret</span></span><br></pre></td></tr></table></figure></p>
<p>å’Œ<code>code 1: simd0-O2.s</code>ç›¸æ¯”ï¼Œ<code>code 2: simd0-O3.s</code>ä»£ç å¯ç”¨äº†SSEæŒ‡ä»¤é›†çš„SIMDæŒ‡ä»¤ï¼Œå®ƒä½¿ç”¨å®Œæ•´çš„<code>xmm</code>å¯„å­˜å™¨ï¼Œè€Œä¸æ˜¯ä½32ä½ï¼Œè¿›è¡Œæµ®ç‚¹æ•°çš„åŠ æ³•å’Œä¹˜æ³•ã€‚å…¶ä¸­ï¼Œ<code>movaps</code>ä»å†…å­˜ä¸­å–4ä¸ªå•ç²¾åº¦æµ®ç‚¹æ•°æ”¾åœ¨<code>xmm</code>å¯„å­˜å™¨ä¸­ï¼Œæˆ–è€…ç›¸åæ–¹å‘ï¼Œ<code>addps</code>å’Œ<code>mulps</code>åˆ†åˆ«å¯¹<code>xmm</code>å¯„å­˜å™¨ä¸­çš„4ä¸ªå•ç²¾åº¦æ•°æ®åšåŠ æ³•å’Œä¹˜æ³•ã€‚ä½¿ç”¨SSEæŒ‡ä»¤ï¼Œè¿è¡Œæ—¶é—´åˆé™ä¸º<code>2s 612ms 38Î¼s</code>ã€‚</p>
<h2 id="AVX2ä¸Šåœº"><a href="#AVX2ä¸Šåœº" class="headerlink" title="AVX2ä¸Šåœº"></a>AVX2ä¸Šåœº</h2><p>è™½ç„¶æˆ‘ä»¬ä»ç„¶å¯ä»¥ä½¿ç”¨å‚æ•°è®©ç¼–è¯‘å™¨è‡ªåŠ¨å‘é‡åŒ–ï¼Œæ¯”å¦‚<code>gcc -O3 -maxv2 -o simd1-avx2-O3.exe simd0.c</code>ï¼Œä½†æ˜¯è¿™æ ·çš„ä¼˜åŒ–ç»“æœæ˜¯ä¸å¯é¢„æµ‹çš„ï¼Œå› æ­¤åœ¨ç¼–ç¨‹çš„æ—¶å€™ä½¿ç”¨é€‚å½“çš„æœºåˆ¶æˆ–çº¦å®šå¼•å¯¼ç¼–è¯‘å™¨è¿›è¡Œå‘é‡åŒ–ï¼Œæ˜¯æ›´åŠ ç¨³å¥çš„æ–¹æ³•ã€‚</p>
<h3 id="å†…å­˜å¯¹é½"><a href="#å†…å­˜å¯¹é½" class="headerlink" title="å†…å­˜å¯¹é½"></a>å†…å­˜å¯¹é½</h3><p>å°†å˜é‡çš„å­˜å‚¨åœ°å€å¯¹é½åˆ°8/16/32/64ç­‰æ•´æ•°çš„å€æ•°ï¼Œæ˜¯æŸäº›æŒ‡ä»¤çš„è¦æ±‚ï¼ŒåŒæ—¶å¯ä»¥ä½¿å¯»å€æ›´åŠ æœ‰æ•ˆã€‚åœ¨GCCç¯å¢ƒä¸‹ï¼Œä½¿ç”¨<code>__attribute__((aligned(__BIGGEST_ALIGNMENT__)))</code>ä¿®é¥°ç¬¦å¼•å¯¼ç¼–è¯‘å™¨è¿›è¡Œå†…å­˜å¯¹é½ã€‚æ¯”å¦‚å£°æ˜é•¿åº¦ä¸ºNçš„floatæ•°ç»„ï¼Œå¯¹é½åˆ°64å­—èŠ‚<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">float</span> a[N] __attribute__((aligned(<span class="number">64</span>)));</span><br></pre></td></tr></table></figure></p>
<h3 id="å‘é‡æ•°æ®ç±»å‹"><a href="#å‘é‡æ•°æ®ç±»å‹" class="headerlink" title="å‘é‡æ•°æ®ç±»å‹"></a>å‘é‡æ•°æ®ç±»å‹</h3><p>åœ¨GCCç¯å¢ƒä¸‹ï¼Œå¯ä»¥å£°æ˜åŸºæœ¬æ•°æ®ç±»å‹<code>char, int, float, double, long</code>çš„æ•°ç»„ä½œä¸ºå‘é‡ï¼Œæ¥å¼•å¯¼ç¼–è¯‘å™¨ä½¿ç”¨SIMDæŒ‡ä»¤ç¼–è¯‘ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç å£°æ˜äº†ä¸€ç§8ä¸ªfloaté•¿çš„å‘é‡ç±»å‹<code>v8f</code>ï¼Œ<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">float</span> v8f __attribute__((vector_size(<span class="number">32</span>)));</span><br></pre></td></tr></table></figure></p>
<p>å‘é‡æ•°æ®ç±»å‹å¯ä»¥ä½¿ç”¨è¿ç®—ç¬¦<code>+ - * / &amp; ^ | %</code>ç­‰è¿›è¡Œé€å…ƒç´ è¿ç®—ï¼Œä»–ä»¬ä¼šè¢«ç¼–è¯‘æˆç›¸åº”çš„SIMDæŒ‡ä»¤ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ä¸Šé¢çš„æŠ€å·§ï¼Œæ¥é‡å†™ç¨‹åºï¼Œç¡®ä¿æˆ‘ä»¬ä½¿ç”¨äº†SIMDæŒ‡ä»¤ï¼Œè§<code>code 3: simd1.c</code><br><figure class="highlight c"><figcaption><span>code 3: simd1.c</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/time.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 100000</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NTIMES 50000</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ALIGN 64</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">float</span> v8f __attribute__((vector_size(<span class="number">32</span>)));</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> VLEN (sizeof(v8f) / sizeof(float))</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> a[N] __attribute__((aligned(ALIGN)));</span><br><span class="line"><span class="keyword">float</span> b[N] __attribute__((aligned(ALIGN)));</span><br><span class="line"><span class="keyword">float</span> c[N] __attribute__((aligned(ALIGN)));</span><br><span class="line"><span class="keyword">float</span> r[N] __attribute__((aligned(ALIGN)));</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    v8f *va, *vb, *vc, *vr;</span><br><span class="line">    <span class="keyword">int</span> i, times, sum;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">timeval</span> <span class="title">starttime</span>, <span class="title">endtime</span>;</span></span><br><span class="line">    <span class="keyword">long</span> s, ms, us, timeuse;</span><br><span class="line">    gettimeofday(&amp;starttime, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* workhorse code  */</span></span><br><span class="line">    <span class="keyword">for</span> (times = <span class="number">0</span>; times &lt; NTIMES; times++)</span><br><span class="line">    &#123;</span><br><span class="line">        va = (v8f *)a;</span><br><span class="line">        vb = (v8f *)b;</span><br><span class="line">        vc = (v8f *)c;</span><br><span class="line">        vr = (v8f *)r;</span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; N; i += VLEN)&#123;</span><br><span class="line">            *vr = (*va + *vb) * (*vc);</span><br><span class="line">            va++, vb++, vc++, vr++;</span><br><span class="line">        &#125;</span><br><span class="line">        sum += sum;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* elapsed time  */</span></span><br><span class="line">    gettimeofday(&amp;endtime, <span class="number">0</span>);</span><br><span class="line">    timeuse = <span class="number">1000000</span> * (endtime.tv_sec - starttime.tv_sec) + </span><br><span class="line">    endtime.tv_usec - starttime.tv_usec;</span><br><span class="line">    s = timeuse / <span class="number">1000000</span>;</span><br><span class="line">    ms = timeuse / <span class="number">1000</span> % <span class="number">1000</span>;</span><br><span class="line">    us = timeuse % <span class="number">1000</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%ld s %ld ms %ld us\n"</span>, s, ms, us);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ä¸Šé¢çš„ç¨‹åºä½¿ç”¨æŒ‡å‘å‘é‡æ•°æ®ç±»å‹<code>v8f</code>çš„æŒ‡é’ˆæ¥è¿›è¡Œè¿ç®—ï¼Œè¿™äº›æ“ä½œå¯ä»¥å¾ˆå¥½çš„ç¼–è¯‘æˆSIMDæŒ‡ä»¤ã€‚å¹¶ä¸”ç”±äºå‘é‡é•¿åº¦æ˜¯8çš„æ•´æ•°å€ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸ç”¨é¢å¤–çš„æ“ä½œã€‚ä½¿ç”¨å‘½ä»¤<code>gcc -mavx2 -O3 -S -o simd1-O3.s simd1.c</code>ç¼–è¯‘ï¼Œå¾—åˆ°å’Œæˆ‘ä»¬é¢„æƒ³ä¸€æ ·çš„æ±‡ç¼–ä»£ç <br><figure class="highlight x86asm"><figcaption><span>code 4: simd1-O3.s</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">main:</span></span><br><span class="line">  xorl %eax, %eax</span><br><span class="line">  movl <span class="number">$50000</span>, %ecx</span><br><span class="line"><span class="symbol">.L3:</span></span><br><span class="line">  xorl %edx, %edx</span><br><span class="line"><span class="symbol">.L2:</span></span><br><span class="line">  <span class="keyword">vmovaps</span> a(%rdx), %ymm1</span><br><span class="line">  <span class="keyword">vaddps</span> b(%rdx), %ymm1, %ymm0</span><br><span class="line">  addq <span class="number">$32</span>, %rdx</span><br><span class="line">  <span class="keyword">vmulps</span> c-<span class="number">32</span>(%rdx), %ymm0, %ymm0</span><br><span class="line">  <span class="keyword">vmovaps</span> %ymm0, r-<span class="number">32</span>(%rdx)</span><br><span class="line">  cmpq <span class="number">$400000</span>, %rdx</span><br><span class="line">  <span class="keyword">jne</span> .L2</span><br><span class="line">  addl %eax, %eax</span><br><span class="line">  subl <span class="number">$1</span>, %ecx</span><br><span class="line">  <span class="keyword">jne</span> .L3</span><br><span class="line">  <span class="keyword">vzeroupper</span></span><br><span class="line">  <span class="keyword">ret</span></span><br></pre></td></tr></table></figure></p>
<p>å’Œ<code>code 2: simd0-O3.s</code>ä¸åŒçš„æ˜¯ï¼Œè¿™é‡Œä½¿ç”¨æŒ‡ä»¤<code>vmovaps vaddps vmulps</code>å¯¹8ä¸ªï¼ˆç»„ï¼‰floatæ•°æ®è¿›è¡Œæ“ä½œã€‚å¯æƒœçš„æ˜¯ï¼Œè™½ç„¶æˆ‘ä»¬ä¸€é¡¿æ“ä½œçŒ›å¦‚è™ï¼Œä½†æ˜¯æ•ˆç‡æå‡å¹¶ä¸æ˜æ˜¾ï¼ŒåŸå› æ˜¯å› ä¸ºè¿™ä¸ªä¾‹å­ä¸­ï¼Œæœ€è´¹æ—¶çš„æ˜¯å†…å­˜çš„è¯»å†™è€Œä¸æ˜¯è®¡ç®—åŠ æ³•å’Œä¹˜æ³•ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬æ¢ä¸€ä¸ªé¡ºåºï¼Œå¯¹äºæŸä¸ªiï¼Œæˆ‘ä»¬é‡å¤<code>NTIMES</code>æ¬¡<code>r[i] = (a[i] + b[i]) * c[i]</code>æ“ä½œï¼Œç„¶ååœ¨è¿›è¡Œä¸‹ä¸€ä¸ªiï¼Œç”±äºç¼–è¯‘å™¨ä¼˜åŒ–æ€»æ˜¯ä¼šå»æ‰ä¸€å±‚å¾ªç¯ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥ä¿®æ”¹æ±‡ç¼–ä»£ç å¦‚ä¸‹<br><figure class="highlight x86asm"><figcaption><span>code 5: simd2-0.s</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">main:</span></span><br><span class="line"><span class="symbol">.L2:</span></span><br><span class="line">    movl	<span class="number">$50000</span>, %eax</span><br><span class="line"><span class="symbol">.L3:</span></span><br><span class="line">    <span class="keyword">vmovaps</span>	a(%rdx), %ymm1</span><br><span class="line">    <span class="keyword">vaddps</span>	b(%rdx), %ymm1, %ymm0</span><br><span class="line">    <span class="keyword">vmulps</span>	c(%rdx), %ymm0, %ymm0</span><br><span class="line"><span class="meta">    .p2align</span> <span class="number">4</span>,,<span class="number">10</span></span><br><span class="line">    addl	%ebx, %ebx</span><br><span class="line">    <span class="keyword">vmovaps</span>	%ymm0, r(%rdx)</span><br><span class="line">    subl	<span class="number">$1</span>, %eax</span><br><span class="line">    <span class="keyword">jne</span>	.L3</span><br><span class="line">    addq	<span class="number">$32</span>, %rdx</span><br><span class="line">    cmpq	<span class="number">$400000</span>, %rdx</span><br><span class="line">    <span class="keyword">jne</span>	.L2</span><br><span class="line">    xorl	%edx, %edx</span><br><span class="line">    <span class="keyword">vzeroupper</span></span><br><span class="line">    <span class="keyword">ret</span></span><br></pre></td></tr></table></figure></p>
<p>ç”¨å‘½ä»¤<code>gcc -o simd2-0.exe simd2-0.s</code>å°†æ±‡ç¼–æŒ‡ä»¤é“¾æ¥æˆäºŒè¿›åˆ¶ç¨‹åºã€‚è™½ç„¶åªæ˜¯è°ƒæ¢äº†ä¸¤ä¸ªå¾ªç¯çš„é¡ºåºï¼Œæ“ä½œä¹Ÿæ²¡æœ‰å°‘ä¸€ä¸ªï¼Œä½†æ˜¯ç”±äºL1/2/3 cacheçš„å­˜åœ¨ï¼Œ<code>code 5</code>æ˜¾è‘—é™ä½äº†è®¿é—®å†…å­˜çš„æ¬¡æ•°ï¼Œæ‰§è¡Œæ—¶é—´ä»…ä¸º<code>0s 634ms 562Î¼s</code>ï¼ŒéªŒè¯äº†æˆ‘ä»¬ä¸Šé¢å…³äºæ•ˆç‡ç“¶é¢ˆçš„è®ºæ–­ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬æ˜¾å¼åœ°å…ˆè¯»ä¸€æ¬¡æ•°æ®åˆ°å¯„å­˜å™¨ä¸­ï¼Œåš<code>NTIMES</code>æ¬¡è®¡ç®—ï¼Œæœ€åå†å†™åˆ°å†…å­˜ä¸­ï¼Œè¿™æ ·å°±é¿å…äº†å¤šæ¬¡è¯»å†™å†…å­˜çš„æ“ä½œã€‚æ±‡ç¼–ä»£ç å¦‚ä¸‹<br><figure class="highlight x86asm"><figcaption><span>code 6: simd2-1.s</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">main:</span></span><br><span class="line"><span class="symbol">.L2:</span></span><br><span class="line">    movl	<span class="number">$50000</span>, %eax</span><br><span class="line">    <span class="keyword">vmovaps</span>	a(%rdx), %ymm1</span><br><span class="line">    <span class="keyword">vmovaps</span>	b(%rdx), %ymm2</span><br><span class="line">    <span class="keyword">vmovaps</span>	c(%rdx), %ymm3</span><br><span class="line"><span class="symbol">.L3:</span></span><br><span class="line">    <span class="keyword">vaddps</span>	%ymm2, %ymm1, %ymm0</span><br><span class="line">    <span class="keyword">vmulps</span>	%ymm3, %ymm0, %ymm0</span><br><span class="line"><span class="meta">    .p2align</span> <span class="number">4</span>,,<span class="number">10</span></span><br><span class="line">    addl	%ebx, %ebx</span><br><span class="line">    <span class="keyword">vmovaps</span>	%ymm0, r(%rdx)</span><br><span class="line">    subl	<span class="number">$1</span>, %eax</span><br><span class="line">    <span class="keyword">jne</span>	.L3</span><br><span class="line">    addq	<span class="number">$32</span>, %rdx</span><br><span class="line">    cmpq	<span class="number">$400000</span>, %rdx</span><br><span class="line">    <span class="keyword">jne</span>	.L2</span><br><span class="line">    xorl	%edx, %edx</span><br><span class="line">    <span class="keyword">vzeroupper</span></span><br><span class="line">    <span class="keyword">ret</span></span><br></pre></td></tr></table></figure></p>
<p>æœ€åä¼˜åŒ–çš„ç¨‹åºæ‰§è¡Œæ—¶é—´ä¸º<code>0s 324ms 504Î¼s</code>ã€‚å’Œæœ€åˆçš„13.8sç›¸æ¯”ï¼Œè¿™ä¸ªé€Ÿåº¦å¿«äº†40å¤šå€ï¼Œè™½ç„¶ä¸»è¦åŠŸåŠ³å¹¶ä¸å½’åŠŸäºSIMDæŒ‡ä»¤ï¼Œä½†æ˜¯åˆç†çš„SIMDå‘é‡åŒ–æœ‰åŠ©äºæˆ‘ä»¬å‡å°‘å†…å­˜çš„è®¿é—®ï¼Œä»è€Œä¸ºç¨‹åºåŠ é€Ÿã€‚</p>

	

	

</article>




	<article>
	
		<h1><a href="/2018/11/02/Hexoæµ‹è¯•/">Hexo Blog Test</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2018-11-02</span><br>
		
		
			<span class="article__tags">
			  	<a class="article__tag-link" href="/tags/test/">test</a>
			</span>
		
	</div>

	

	
		<h1 id="1çº§æ ‡é¢˜-title"><a href="#1çº§æ ‡é¢˜-title" class="headerlink" title="1çº§æ ‡é¢˜ title"></a>1çº§æ ‡é¢˜ title</h1><h2 id="2çº§æ ‡é¢˜"><a href="#2çº§æ ‡é¢˜" class="headerlink" title="2çº§æ ‡é¢˜"></a>2çº§æ ‡é¢˜</h2><h3 id="3çº§æ ‡é¢˜"><a href="#3çº§æ ‡é¢˜" class="headerlink" title="3çº§æ ‡é¢˜"></a>3çº§æ ‡é¢˜</h3><p>æ­£æ–‡ï¼Œå­—ä½“ã€‚</p>
<p>ä»£ç æ ·å¼ï¼Œå¼•ç”¨<code>vmulpd</code>å’Œ<code>æŒ‡ä»¤é›†</code>ã€‚<em>å¼ºè°ƒ</em>å’Œ<strong>å¼ºè°ƒ</strong><br><strong>instruction INSTRUCTION</strong><br><figure class="highlight c"><figcaption><span>vsum.c</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">float</span> <span class="title">vsum</span><span class="params">(<span class="keyword">float</span> *v, <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">float</span> s = <span class="number">0.0</span>; <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;n; i++)</span><br><span class="line">    s += v[i];</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>MathJax test.<br>When \(a \ne 0\), there are two solutions to $ax^2 + bx + c = 0$ and they are<br>inline symbols, $\LaTeX \And \alpha$ and<br>  $$x = {-b \pm \sqrt{b^2-4ac} \over 2a}.$$</p>
<figure class="highlight html"><figcaption><span>add MathJax support</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/x-mathjax-config"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">  MathJax.Hub.Config(&#123;tex2jax: &#123;inlineMath: [['$','$'], ['\\(','\\)']]&#125;&#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">'https://cdnjs.cloudflare.com/ajax/libs/</span></span></span><br><span class="line"><span class="tag"><span class="string">mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML'</span> <span class="attr">async</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

	

	

</article>




	<article>
	
		<h1><a href="/2018/11/02/hello-world/">Hello World</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2018-11-02</span><br>
		
		
	</div>

	

	
		<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

	

	

</article>






	<span class="different-posts">ğŸ“• end of posts ğŸ“•</span>


	</main>

	<footer class="footer">
	<div class="footer-content">
		
	      <div class="footer__element">
	<p>Hi there, <br>welcome to my Blog glad you found it. Have a look around, will you?</p>
</div>

	    
	      <div class="footer__element">
	<h5>Check out</h5>
	<ul class="footer-links">
		<li class="footer-links__link"><a href="/archives">Archive</a></li>
		
		  <li class="footer-links__link"><a href="/atom.xml">RSS</a></li>
	    
		<li class="footer-links__link"><a href="/about">about page</a></li>
		<li class="footer-links__link"><a href="/tags">Tags</a></li>
		<li class="footer-links__link"><a href="/categories">Categories</a></li>
	</ul>
</div>

	    

		<div class="footer-credit">
			<span>Â© 2018 von Weber | Powered by <a href="https://hexo.io/">Hexo</a> | Theme <a href="https://github.com/HoverBaum/meilidu-hexo">MeiliDu</a></span>
		</div>

	</div>


</footer>



</body>

</html>
